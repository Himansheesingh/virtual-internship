<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />"
    <link rel="stylesheet" href="reg.css">
     
</head>
<body>
<div class="container">
     <div class="header">
        <h2>REGISTRATION FORM</h2>
     </div>
     
     <form class="form" id="form">
        <div class="form-control">
            <label>Username</label>
            <input type="text" name=""id="username"placeholder="Enter your fullname" autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error Msg</small>
        </div>
        <div class="form-control">
            <label>Email</label>
            <input type="Email" name=""id="email"placeholder="Enter your Email"autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error Msg</small>
        </div>
        <div class="form-control">
            <label>Number</label>
            <input type="Number" name=""id="number"placeholder="Enter your Number"autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error Msg</small>
        </div>
        <div class="form-control">
            <label>Password</label>
            <input type="password" name=""id="password"placeholder="Enter your Password"autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error Msg</small>
        </div>
        <div class="form-control">
            <label>Confirm Password</label>
            <input type="Password" name=""id="cpassword"placeholder="Enter your Password"autocomplete="off">
            <i class="fas fa-check-circle"></i>
            <i class="fas fa-exclamation-circle"></i>
            <small>Error Msg</small>
        </div>
        <input type="Submit" onclick=sendData()  class="btn" name="">

     </form>
    </div>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js">

    </script>
    <script type="text/javascript">
        const form = document.getElementById('form');
        const username = document.getElementById('username');
        const email = document.getElementById('email');
        const phone = document.getElementById('phone');
        const password = document.getElementById('password');
        const cpassword = document.getElementById('cpassword');
         
        form.addEventListener('submit',(event) => {
            event.preventDefault();

            validate();
        })

        const sendData = (sRate, count) => {
            if(sRate === count){
                alert('registration successfull');
                swal(" Welcome!", + username, "Registration Successful", "success");

            }

        }

        const successMsg = () => {
            let formCon = document.getElementsByclassname('form-control');
            var count = formCon.length - 1;
            for( var i = 0 ; i < formCon.length ; i++){
                if(formCon[i].className === "form-control success"){
                    var sRate = 0 + i;
                    console.log(sRate);
                    sendData(sRate, count);

                }else{
                    return false;
                }

            }
        }
        const isEmail = (emailVal) => {
            var atSymbol = emailVal.indexOf("@");
            if(atSymbol < 1) return false;
            var dot = emailVal.lastIndexOf('.');
            if(dot <= atSymbol + 3) return false;
            if(dot=== emailVal.length - 1) return false;
            return true;

        }

        const validate = () => {
            const usernameVal = document.value.trim();
        const emailVal = document.value.trim();
        const phoneVal = document.value.trim();
        const passwordVal = document.value.trim();
        const cpasswordVal = document.value.trim();
        
        if(usernameVal=== ""){
            setErrormsg(username, 'username cannot be blank');

        }else if(username.length <=2){
            setErrormsg(username, 'username min 3 char');
        }else{
            setSuccessMsg(username);
        }

        if(emailVal=== ""){
            setErrormsg(email, 'email cannot be blank');

        }else if(!isEmail(emailVal)){
            setErrormsg(email, 'not a valid email');
        }else{
            setSuccessMsg(email);
        }

        if(phoneVal=== ""){
            setErrormsg(phone, 'phone cannot be blank');

        }else if(phoneVal.length != 10){
            setErrormsg(phone, 'not a valid phone num');
        }else{
            setSuccessMsg(phone);
        }

        if(passwordVal=== ""){
            setErrormsg(password, 'password cannot be blank');

        }else if(passwordVal.length <= 5){
            setErrormsg(password, 'minimum 6 char');
        }else{
            setSuccessMsg(password);
        }

        if(passwordVal=== ""){
            setErrormsg(cpassword, 'confirmpassword cannot be blank');

        }else if(passwordVal !== cpasswordVal){
            setErrormsg(cpasswordVal, 'password are not matching');
        }else{
            setSuccessMsg(cpassword);
        }
        successMsg(usernameVal);
    }
    function setErrorMsg(input, errormsgs){
        const formControl = input.parentElement;
        const small = formControl.querySelector('small');
        formControl.className = "form-control error";
        small.innerText = errormsgs;
        
    }

    function setSuccessMsg(input){
        const formControl = input.parentElement;
        formControl.className = "form-control success";
        
        

    }

        

        

    </script>


    
</body>
</html>


